(!0===window.navigator.standalone||window.matchMedia("(display-mode: standalone)").matches)&&document.addEventListener("dblclick",(function(event){if(null!==event.target.closest(".conversation")){const content=event.target.closest(".conversation"),currentScale=window.getComputedStyle(content).transform,scaleMatrix=new WebKitCSSMatrix(currentScale),scaleX=scaleMatrix.a,scaleY=scaleMatrix.d;1===scaleX&&1===scaleY?(content.style.transform="scaleX(1.2) scaleY(1.2)",content.classList.add("enlarged")):(content.style.transform="scaleX(1) scaleY(1)",content.classList.remove("enlarged"))}}));const shareButton=document.getElementById("share-button"),pdfButton=document.getElementById("pdf-button");pdfButton.addEventListener("click",(()=>{try{let currentPage=0;const pdf=new jspdf.jsPDF,messageElements=document.querySelectorAll(".message.user, .message.assistant"),sortedElements=Array.from(messageElements).sort(((a,b)=>2&a.compareDocumentPosition(b)?1:-1));sortedElements.forEach((element=>{let cleanText="\n"+element.textContent.replace(/^[\t\s]+/,"").replace(/[\t\s]+$/,"").replace(/content_copycontent_copy/g,"").replace(/content_copy/g,"");element.classList.contains("user")?(pdf.getFont(),pdf.setFont("assistant.regular","normal"),pdf.setFontSize(12),pdf.setLineHeightFactor(1)):(pdf.getFont(),pdf.setFont("assistant.regular","bold"),pdf.setFontSize(12),pdf.setLineHeightFactor(1)),pdf.splitTextToSize(cleanText,pdf.internal.pageSize.width-20).forEach((line=>{5*currentPage+5>=pdf.internal.pageSize.height-10&&(pdf.addPage(),currentPage=0),pdf.text(line,10,10+5*currentPage),currentPage++}))}));const firstMessageText=sortedElements[0].textContent.trim();let endIndex=firstMessageText.lastIndexOf(" ",40);endIndex=-1===endIndex||endIndex>40?40:endIndex;let pdfName=firstMessageText.substring(0,endIndex).trim();pdfName=pdfName.replace(/\s+/g,"_")+".pdf",pdf.save(pdfName)}catch(error){console.error("Error creating PDF",error)}})),navigator.share?shareButton.addEventListener("click",(async()=>{try{const contentElements=document.querySelectorAll(".content");let text="";for(let element of contentElements)text+=element.textContent+"\n";await navigator.clipboard.writeText(text),await navigator.share({title:"FreeGPT",text:text})}catch(error){console.error("Error sharing content",error)}})):shareButton.style.display="none";